<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movies</title>
</head>
<body>
    <h1>Movies</h1>
    <form action="/" method="get">
        @if (request('category'))
            <input type="hidden" name="category" value="{{ request('category') }}">
        @endif
        <div class="input-group mb-3">
            <input type="text" class="form-control" placeholder="Search..." name="search" value="{{ request("search") }}">
            <button class="btn btn-outline-danger" type="submit">Search</button>
        </div>
    </form>
    <ul>
        @foreach ($movies as $movie)
            <li>
                <a href="/movie/{{ $movie->slug }}">{{ $movie->title }}</a>
                @if ($movie->poster_path && Storage::exists('public/' . $movie->poster_path))
                    <img src="{{ asset('storage/' . $movie->poster_path) }}" alt="{{ $movie->title }}" class="img-fluid">
                @else
                    <img src="https://image.tmdb.org/t/p/w200/{{ $movie->poster_path }}" alt="{{ $movie->title }}">
                @endif

                <img src="https://image.tmdb.org/t/p/w200/{{ $movie->backdrop_path }}" alt="{{ $movie->title }}">
                <p>{{ $movie->overview }}</p>
                <p>{{ $movie->popularity }}</p>
                <p>{{ $movie->release_date }}</p>
                {{-- <iframe width="560" height="315" src="https://www.youtube.com/embed/{{ $movie->key }}" frameborder="0" allowfullscreen></iframe> --}}
            </li>
        @endforeach
    </ul>

    <ul>
        <a href="{{ url('/login')}}">Login</a>
        <a class="nav-link" href="{{ route('password.update') }}">Update Password</a>
        <a href="{{ url('/logout') }}">Logout</a>
        <a class="nav-link" href="{{ route('account.delete.form') }}">Delete Account</a>

        <form action="/dashboard/{{ $movie->slug }}" method="POST" class="d-inline">
            @method('delete')
            @csrf
            <button class="btn btn-danger" onclick="return confirm('Are You Sure!!')"><i class="bi bi-x-circle"></i>
                Delete</button>
            <input type="hidden" name="slug" value="{{ $movie->slug }}">
        </form>

        @auth
            <li class="nav-item">
                <a class="nav-link" href="{{ url('dashboard') }}">Dashboard</a>
            </li>
        @endauth
    </ul>
</body>
</html>





<!-- buat sort berdasarkan -->

@extends('layouts.main')
@section('container')

    <h1>Movie List</h1>

    <!-- Tombol Sortir untuk Nama -->
    <a href="{{ route('movies.index', ['sort' => 'title', 'direction' => 'asc']) }}">Sort by Title (ASC)</a>
    <a href="{{ route('movies.index', ['sort' => 'title', 'direction' => 'desc']) }}">Sort by Title (DESC)</a>

    <!-- Tombol Sortir untuk Tanggal Rilis -->
    <a href="{{ route('movies.index', ['sort' => 'release_date', 'direction' => 'asc']) }}">Sort by Release Date (ASC)</a>
    <a href="{{ route('movies.index', ['sort' => 'release_date', 'direction' => 'desc']) }}">Sort by Release Date (DESC)</a>

    <table>
        <thead>
            <tr>
                <th><a href="{{ route('movies.index', ['sort' => 'title', 'direction' => 'asc']) }}">Title</a></th>
                <th><a href="{{ route('movies.index', ['sort' => 'release_date', 'direction' => 'asc']) }}">Release Date</a></th>
                <!-- Tambahkan kolom-kolom lain jika perlu -->
            </tr>
        </thead>
        <tbody>
            @foreach($movies as $movie)
                <tr>
                    <td>{{ $movie->title }}</td>
                    <td>{{ $movie->release_date }}</td>
                    <!-- Tambahkan kolom-kolom lain jika perlu -->
                </tr>
            @endforeach
        </tbody>
    </table>
@endsection





<!-- ini create -->

<div class="container">
    <h2>Add Movie</h2>

    @if ($errors->any())
        <div class="alert alert-danger">
            <ul>
                @foreach ($errors->all() as $error)
                    <li>{{ $error }}</li>
                @endforeach
            </ul>
        </div>
    @endif

    <form action="{{ route('dashboard.store') }}" method="POST" enctype="multipart/form-data">
        @csrf
        <div class="form-group">
            <label for="title">Title:</label>
            <input type="text" class="form-control" id="title" name="title" required>
        </div>
        <div class="form-group">
            <label for="slug">slug</label>
            <input type="text" class="form-control" id="slug" name="slug" required>
        </div>
        <div class="form-group">
            <label for="overview">Overview:</label>
            <textarea class="form-control" id="overview" name="overview" rows="3" required></textarea>
        </div>
        <div class="form-group">
            <label for="popularity">Popularity:</label>
            <input type="text" class="form-control" id="popularity" name="popularity" required>
        </div>
       
        <div class="form-group">
            <label for="release_date">Release Date:</label>
            <input type="date" class="form-control" id="release_date" name="release_date" required>
        </div>
        <div class="form-group">
            <label for="category_id">Category ID:</label>
            <input type="text" class="form-control" id="category_id" name="category_id" required>
        </div>
        

        <!-- Add other form fields here based on your Movie model -->

        <button type="submit" class="btn btn-primary">Add Movie</button>
    </form>
</div>